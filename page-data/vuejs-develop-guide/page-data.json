{"componentChunkName":"component---src-templates-blog-post-js","path":"/vuejs-develop-guide","result":{"data":{"markdownRemark":{"html":"<h2>开发阶段</h2>\n<p>这个项目是一款中后台管理系统，所以当时以 Vue.js 作为主框架进行开发，然后使用了 iView 作为 UI 框架。其中，其它部分就是 Vue 的生态了，例如 Vue Router 和 Vuex 等。</p>\n<h3>生成项目结构</h3>\n<p>最近 <a href=\"https://github.com/vuejs/vue-cli\">@vue/cli</a> 发布了正式版 Vue CLI 3，但其实早在 3 月份就发布了测试版，所以当初使用了测试版 CLI 生成了项目结构。最近也升级成和最新版一致的了。CLI 工具还增加非常强大的功能，包括安装插件、可视化界面、配置文件等。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">// 生成项目结构\nvue create project-name\n\n// 使用 UI 界面\nvue ui</code></pre></div>\n<p>这部分就比较简单，关于项目结构，CLI 文档也有说明。</p>\n<h3>配置开发环境</h3>\n<p>最新版的 CLI 工具支持自定义配置，如果你在项目根目录下提供一个 <code class=\"language-text\">vue.config.js</code> 文件，cli 在启动项目时会自动加载这些配置项。这部分应该是比较有趣的一部分，而且把这些东西配置好之后，开发效率可以嗖嗖嗖的提升。</p>\n<p>这一项里面，我最常用的是端口号和代理这两项，<a href=\"https://webpack.js.org/configuration/dev-server/\">webpack-dev-server</a> 支持的配置项都可以集成进来。需要代理的原因是前后台是分离式开发，需要解决跨域问题（如果后台配置了 CORS，则不需要这项配置）。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//...</span>\n  devServer<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    port<span class=\"token operator\">:</span> <span class=\"token number\">8081</span><span class=\"token punctuation\">,</span>\n    proxy<span class=\"token operator\">:</span> <span class=\"token string\">'http://localhost:8080'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>使用 webpack 插件</h3>\n<p>使用 webpack 插件比较简单，例如使用 <a href=\"https://github.com/webpack-contrib/webpack-bundle-analyzer\">webpack-bundle-analyzer</a> 来分析打包后各个模块的体积大小：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> BundleAnalyzerPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-bundle-analyzer'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span>BundleAnalyzerPlugin<span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">BundleAnalyzerPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>\bwebpack 链式操作 chainWebpack</h3>\n<p>这个配置项允许你对内部的 webpack 配置做出一些修改，例如添加一个新的 loader、修改插件的配置、为其它目录添加 vue 的支持等。但是 问题在于你可能不知道内部使用的 loader，那么这时候 \b<code class=\"language-text\">vue inspect</code> 这个命令会将内部配置输出在控制台，你可以查看想要修改的规则。看一下这个 \b🌰：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// vue.config.js</span>\n\n<span class=\"token comment\">// 修改 index.html 和 favicon.png 的路径</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">chainWebpack</span><span class=\"token operator\">:</span> <span class=\"token parameter\">config</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    config<span class=\"token punctuation\">.</span><span class=\"token function\">plugin</span><span class=\"token punctuation\">(</span><span class=\"token string\">'html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">tap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">args</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>template <span class=\"token operator\">=</span> <span class=\"token string\">'path/to/index.html'</span><span class=\"token punctuation\">;</span>\n      args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>favicon <span class=\"token operator\">=</span> <span class=\"token string\">'path/to/favicon.png'</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> args<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>这个功能使用了 <a href=\"https://github.com/neutrinojs/webpack-chain\">webpack-chain</a> 的 API。</p>\n<h3>使用环境变量</h3>\n<p>如果你想在项目中使用环境变量，可以在项目的根目录下增加以下文件：</p>\n<ul>\n<li><code class=\"language-text\">.env</code> 所有环境加载</li>\n<li><code class=\"language-text\">.env.local</code> 所有环境 加载，会被 git 忽略</li>\n<li><code class=\"language-text\">.env.[mode]</code> 在特定环境中加载</li>\n<li><code class=\"language-text\">.env.[mode].local</code> 在特定环境中加载，会被 git 忽略</li>\n</ul>\n<p>其中 mode 的值 可以是：<code class=\"language-text\">development</code>/<code class=\"language-text\">production</code>/<code class=\"language-text\">test</code>。</p>\n<p>如何使用呢？假如在项目根目录下存在 <code class=\"language-text\">.env</code> 文件：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">VUE_APP_TITLE=Hello World</code></pre></div>\n<p>此时，在项目代码中就可以这样访问它：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">VUE_APP_TITLE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Hello World</span></code></pre></div>\n<p>如果运行 <code class=\"language-text\">yarn build</code> 进行构建，那么这个环境变量将会直接被替换对应的值。</p>\n<h3>浏览器兼容</h3>\n<p>如果要兼容 IE 则 需要安装 <code class=\"language-text\">babel-polyfill</code>。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// main.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'babel-polyfill'</span>；\n<span class=\"token comment\">// ...</span></code></pre></div>\n<h3>使用 JSX</h3>\n<p>提到 JSX，最先想到的是 React。其实 JSX 是可以独立存在的，它只是一种语法糖而已。所以在 Vue 中也可以使用。在 Vue CLI 3 中可以直接使用 JSX，而 2.x 版本则需要安装相应的依赖（<a href=\"https://github.com/vuejs/babel-plugin-transform-vue-jsx\">babel-plugin-transform-vue-jsx</a>）。</p>\n<p>我们项目的 UI 框架是 iView，在使用 Table 组件时经常要使用 <code class=\"language-text\">render</code> 函数，如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      columns<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          title<span class=\"token operator\">:</span> <span class=\"token string\">'操作'</span><span class=\"token punctuation\">,</span>\n          key<span class=\"token operator\">:</span> <span class=\"token string\">'action'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">h<span class=\"token punctuation\">,</span> params</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Button'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'编辑'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Button'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'删除'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>但是如果 <code class=\"language-text\">render</code> 函数要处理很多元素的时候，它会显得非常臃肿，而且不易维护。那此时我们就可以使用 JSX 来优化代码：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      columns<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          title<span class=\"token operator\">:</span> <span class=\"token string\">'操作'</span><span class=\"token punctuation\">,</span>\n          key<span class=\"token operator\">:</span> <span class=\"token string\">'action'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">h<span class=\"token punctuation\">,</span> params</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n              <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>i<span class=\"token operator\">-</span>button<span class=\"token operator\">></span>编辑<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>i<span class=\"token operator\">-</span>button<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>i<span class=\"token operator\">-</span>button<span class=\"token operator\">></span>删除<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>i<span class=\"token operator\">-</span>button<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>注：如果你使用的是 Webstorm，可能会出现语法错误之类的警告。可以通过设置 <code class=\"language-text\">Settings -&gt; Languages &amp; Frameworks -&gt; Javascript -&gt; Javascript language version -&gt; React JSX</code> 来解除报错。</p>\n</blockquote>\n<h2>性能优化</h2>\n<h3>代码分割 &#x26; 路由懒加载</h3>\n<p>\b 代码分割是什么意思呢？正常来说，在你使用 <code class=\"language-text\">yarn build</code> 构建之后， <code class=\"language-text\">dist</code> 文件下会生成一个如几个文件，默认情况下没有开启代码分割。\b</p>\n<p><img src=\"https://ws1.sinaimg.cn/large/e7aabc75ly1fxo489h9aaj20pg052my4.jpg\" alt=\"dist-js\"></p>\n<p>例如有如下路由：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Home <span class=\"token keyword\">from</span> <span class=\"token string\">'./views/Home.vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> About <span class=\"token keyword\">from</span> <span class=\"token string\">'./views/About.vue'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span>\n    component<span class=\"token operator\">:</span> Home<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> <span class=\"token string\">'/about'</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'About'</span><span class=\"token punctuation\">,</span>\n    component<span class=\"token operator\">:</span> About<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> routes<span class=\"token punctuation\">;</span></code></pre></div>\n<p>这是我们经常使用的路由加载方式，没有代码分割。那我们如何使用代码分割功能呢？\b 这时我们就可以根据路由对代码进行分割了：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'home'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">component</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* webpackChunkName: \"home\" */</span> <span class=\"token string\">'./views/Home.vue'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> <span class=\"token string\">'/about'</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'About'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">component</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* webpackChunkName: \"about\" */</span> <span class=\"token string\">'./views/About.vue'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> routes<span class=\"token punctuation\">;</span></code></pre></div>\n<p>这样改造完之后，我们再运行 <code class=\"language-text\">yarn build</code>：</p>\n<p><img src=\"https://ws1.sinaimg.cn/large/e7aabc75ly1fxo4sch1gdj20qc08e0uu.jpg\" alt=\"dist-chunk-js\"></p>\n<p>在原来的基础上又增加了 2 个 js 文件和 2 个 css 文件，这正是代码分割的作用。只有在访问相应路由时再去加载对应的 js 和 css 文件。</p>\n<h3>分析并压缩代码体积</h3>\n<p>在编写大型程序时，难免会遇到打包后 js 文件体积过大的问题，因为项目可能会引入第三方依赖，在一定程度上加重了这个问题。那如何解决呢？</p>\n<ol>\n<li>代码分割，按需加载</li>\n<li>分析打包后的代码</li>\n<li>剥离第三方库</li>\n</ol>\n<p>首先，代码分割上面已经说了。</p>\n<p>如何分析打包后的代码呢？运行 <code class=\"language-text\">yarn build</code> 时提供参数 <code class=\"language-text\">--report</code>：</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> build --report</code></pre></div>\n<p>运行上述命令之后，会在 <code class=\"language-text\">dist</code> 下生成 <code class=\"language-text\">report.html</code>，打开它可以看到：</p>\n<p><img src=\"https://ws1.sinaimg.cn/large/e7aabc75ly1fxo55j0uevj21z410y7be.jpg\" alt=\"build-report\"></p>\n<p>\b 各个色块代表了相应的 js 所占用的空间。面积越大的体积就越大。</p>\n<p>那如何优化呢？在使用了路由懒加载之后，性能会有比较明显的提升。但是我们还需要进一步优化：剥离第三方库。</p>\n<p>\b 何为剥离？因为项目使用 iView 作为 UI 框架，然后还有 Vuex 和 vue-router 这几个 依赖框架。\b\b 正常情况下，这些框架和其他一些依赖都会被打包进 <code class=\"language-text\">dist/chunk-venders.[hash].js</code> 中，因此，\b 可能会得到一个很大（\b5M+）的 js 文件。但是我们可以通过将这些 js 以 CDN 的方式引入，这样 就可以避免 <code class=\"language-text\">chunk-venders.[hash].js</code> 文件过大：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// vue.config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  configureWebpack<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    externals<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      vue<span class=\"token operator\">:</span> <span class=\"token string\">'Vue'</span><span class=\"token punctuation\">,</span>\n      vuex<span class=\"token operator\">:</span> <span class=\"token string\">'Vuex'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'vue-router'</span><span class=\"token operator\">:</span> <span class=\"token string\">'VueRouter'</span><span class=\"token punctuation\">,</span>\n      iview<span class=\"token operator\">:</span> <span class=\"token string\">'iview'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>在 <code class=\"language-text\">public/index.html</code> 中添加以下内容：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>X-UA-Compatible<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>IE=edge<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>width=device-width,initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>icon<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>&lt;%= BASE_URL %>favicon.ico<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token comment\">&lt;!-- 要添加的 css --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span>\n      <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/iview@3.1.5/dist/styles/iview.css<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">/></span></span>\n    <span class=\"token comment\">&lt;!-- 要添加的 css --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>vue-test-demo<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>noscript</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span>\n        <span class=\"token punctuation\">></span></span>We're sorry but vue-test-demo doesn't work properly without JavaScript\n        enabled. Please enable it to continue.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span>\n      <span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>noscript</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>app<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- 要添加的 js --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/vue@2.5.16/dist/vue.runtime.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/vuex@3.0.1/dist/vuex.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/vue-router@3.0.1/dist/vue-router.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/iview@3.1.5/dist/iview.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- 要添加的 js --></span>\n    <span class=\"token comment\">&lt;!-- built files will be auto injected --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>如果是其它的第三方库，写法都一样。再次运行 <code class=\"language-text\">yarn build</code> 之后，\b 可以看到 <code class=\"language-text\">chunk-venders.[hash].js</code> 文件的体积会明显变小。</p>\n<h3>启用 gzip</h3>\n<p>HTTP 协议中的 gzip 是用来改进性能的，它的压缩比率大概在 3 到 10 倍之间，可以大幅节省网络带宽，但是会增加服务器 CPU 的负担。目前主流浏览器都支持 gzip 解码，所以一般只需要服务端启用 gzip 即可。</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/vuejs-develop-guide/#%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5\">开发阶段</a></p>\n<ul>\n<li><a href=\"/vuejs-develop-guide/#%E7%94%9F%E6%88%90%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84\">生成项目结构</a></li>\n<li><a href=\"/vuejs-develop-guide/#%E9%85%8D%E7%BD%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83\">配置开发环境</a></li>\n<li><a href=\"/vuejs-develop-guide/#%E4%BD%BF%E7%94%A8-webpack-%E6%8F%92%E4%BB%B6\">使用 webpack 插件</a></li>\n<li><a href=\"/vuejs-develop-guide/#%08webpack-%E9%93%BE%E5%BC%8F%E6%93%8D%E4%BD%9C-chainwebpack\">\bwebpack 链式操作 chainWebpack</a></li>\n<li><a href=\"/vuejs-develop-guide/#%E4%BD%BF%E7%94%A8%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F\">使用环境变量</a></li>\n<li><a href=\"/vuejs-develop-guide/#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9\">浏览器兼容</a></li>\n<li><a href=\"/vuejs-develop-guide/#%E4%BD%BF%E7%94%A8-jsx\">使用 JSX</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/vuejs-develop-guide/#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96\">性能优化</a></p>\n<ul>\n<li><a href=\"/vuejs-develop-guide/#%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2--%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD\">代码分割 &#x26; 路由懒加载</a></li>\n<li><a href=\"/vuejs-develop-guide/#%E5%88%86%E6%9E%90%E5%B9%B6%E5%8E%8B%E7%BC%A9%E4%BB%A3%E7%A0%81%E4%BD%93%E7%A7%AF\">分析并压缩代码体积</a></li>\n<li><a href=\"/vuejs-develop-guide/#%E5%90%AF%E7%94%A8-gzip\">启用 gzip</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"path":"/vuejs-develop-guide","date":"Dec 09, 2018","title":"Vue.js 开发不完全指南","tldr":"今年三月份到现在，一直在做 Vuejs 的 Web 开发。我想现在是时候回头看看，这近一年的开发，我们都经历了什么？我想这其中滋味，酸甜苦辣俱有。","tags":["Vue"]},"timeToRead":7}},"pageContext":{"next":{"frontmatter":{"title":"『译』你应该要知道的 Array.map() 的 4 种用法","path":"/4-uses-of-array-map"}},"previous":{"frontmatter":{"title":"『译』JavaScript 错误处理权威指南","path":"/handling-errors-in-javascript"}},"relatedPosts":[]}}}